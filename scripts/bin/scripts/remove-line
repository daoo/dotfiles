#!/usr/bin/env python3

import os
import sys

def main(pattern, path):
    output = []
    with open(path, "r") as f:
        for line in f:
            # line includes new-line at end while pattern doesn't match against
            # stripped line and keep newlines in output since writelines
            # doesn't add newlines.
            if pattern != line.rstrip("\n"):
                output.append(line)

    with open(path, "w") as f:
        f.writelines(output)

if len(sys.argv) == 3 and os.path.isfile(sys.argv[2]):
    main(sys.argv[1], sys.argv[2])
else:
    sys.stderr.write("Usage: %s LINE FILE\n" % sys.argv[0])
    sys.exit(1)
