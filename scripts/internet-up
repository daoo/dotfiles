#!/bin/bash

COMMAND="ping 192.168.0.1 -c 2"

I=0
while [ $I -lt 5 ]; do
  $COMMAND > /dev/null
  if [ $? -eq 0 ]; then
    $@
    exit 0
  fi

  sleep 15
  I=$(expr $I + 1)
done

exit 1
